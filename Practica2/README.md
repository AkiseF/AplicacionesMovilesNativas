# Pr√°ctica 2 - Aplicaci√≥n M√≥vil B√°sica

## Objetivo
Implementar la persistencia de datos a trav√©s de SharedPreferences para guardar las preferencias del usuario. Donde se a√±adir√° una funcionalidad que permita al usuario seleccionar y aplicar un tema visual (claro u oscuro) a la aplicaci√≥n, asegurando que esta elecci√≥n se mantenga entre diferentes sesiones de uso.

## Descripci√≥n del Proyecto
**"Aventura Interactiva del garambullo"** es una aplicaci√≥n Flutter que presenta una experiencia educativa sobre el garambullo (cact√°cea nativa mexicana) a trav√©s de m√∫ltiples pantallas navegables con elementos interactivos y transiciones suaves.

### Caracter√≠sticas Principales
- üå± **Pantalla principal**: Bienvenida con imagen personalizada
- üîÑ **Navegaci√≥n por gestos**: Deslizamiento horizontal entre pantallas
- üéØ **Elementos interactivos**: C√≠rculos t√°ctiles para navegaci√≥n avanzada
- üì± **Indicadores de p√°gina**: Animaci√≥n SlideEffect para mejor UX
- üñºÔ∏è **Dise√±o inmersivo**: Im√°genes de fondo con overlays graduales
- üèóÔ∏è **Arquitectura modular**: Widgets separados y reutilizables

## Decisiones de Dise√±o y Mecanismos de Transici√≥n

### üé® Decisiones de Dise√±o

#### **1. Arquitectura Modular**
- **Separaci√≥n de responsabilidades**: Cada pantalla es un widget independiente
- **Widgets reutilizables**: `PageIndicatorWidget` e `InteractiveCircleWidget`
- **Mantenibilidad**: C√≥digo organizado en carpetas `screens/` y `widgets/`

#### **2. Dise√±o Visual Inmersivo**
- **Im√°genes de fondo completo**: `BoxFit.cover` para pantalla completa
- **Overlays graduales**: `LinearGradient` para mejor legibilidad del texto
- **Tipograf√≠a contrastante**: Texto blanco con sombras negras
- **SafeArea**: Respeta las √°reas seguras del dispositivo

#### **3. Experiencia de Usuario (UX)**
- **Navegaci√≥n intuitiva**: Gestos de deslizamiento horizontal
- **Feedback visual**: Indicadores de p√°gina con animaci√≥n
- **Elementos interactivos claros**: C√≠rculos con iconos y sombras
- **Instrucciones contextuales**: Mensajes que gu√≠an al usuario

### üîÑ Mecanismos de Transici√≥n

#### **1. PageView para Navegaci√≥n Principal**
```dart
PageView(
  controller: _pageController,
  children: _screens,
)
```
- **Transici√≥n**: Deslizamiento suave entre pantallas principales
- **Control**: `PageController` para gesti√≥n program√°tica
- **Responsivo**: Adaptable a diferentes tama√±os de pantalla

#### **2. SlideEffect en Indicadores**
```dart
SlideEffect(
  dotHeight: 12,
  dotWidth: 12,
  type: SlideType.normal,
)
```
- **Animaci√≥n**: Indicador deslizante entre puntos de p√°gina
- **Librer√≠a**: `smooth_page_indicator` para animaciones profesionales
- **Personalizaci√≥n**: Colores y tama√±os configurables

#### **3. Navigator.push para Navegaci√≥n Avanzada**
```dart
Navigator.push(
  context,
  MaterialPageRoute(builder: (context) => SubAlterScreen()),
)
```
- **Transici√≥n**: Animaci√≥n est√°ndar de material design
- **Stack**: Mantiene historial de navegaci√≥n
- **Retorno**: Bot√≥n back autom√°tico en nueva pantalla

## Implementaci√≥n de Temas con SharedPreferences

### 1. Servicio de Temas (`lib/services/theme_service.dart`)

**Caracter√≠sticas principales:**
- **Persistencia**: Utiliza SharedPreferences para guardar la preferencia del usuario
- **Notificaci√≥n de cambios**: Extiende ChangeNotifier para actualizar la UI autom√°ticamente
- **Colores espec√≠ficos**: Define esquemas de colores para cada componente de la aplicaci√≥n

**Colores definidos:**
- **C√≠rculos interactivos**: Color de fondo, borde e icono
- **PageIndicator**: Color de puntos activos e inactivos
- **Pantallas Base2**: Colores verde para tema claro, verde oscuro para tema oscuro
- **Pantallas Base3**: Colores naranja para tema claro, naranja oscuro para tema oscuro
- **SubAlterScreen**: Colores marr√≥n para tema claro, marr√≥n oscuro para tema oscuro

### 2. Widget de Control de Tema (`lib/widgets/ThemeToggleWidget.dart`)

**Caracter√≠sticas:**
- **Switch interactivo**: Permite cambiar entre temas claro y oscuro
- **Iconos representativos**: Sol para tema claro, luna para tema oscuro
- **Estilo consistente**: Dise√±o que se adapta al tema actual
- **Posicionamiento**: Ubicado en la esquina superior derecha de MainScreen

## Esquemas de Colores

### Tema Claro
```dart
// C√≠rculos interactivos
circleColor: Color.fromRGBO(255, 255, 255, 0.8)
circleBorderColor: Colors.white
circleIconColor: Color.fromARGB(255, 19, 168, 14)

// PageIndicator
pageIndicatorDotColor: Color.fromARGB(255, 200, 200, 200)
pageIndicatorActiveDotColor: Color.fromARGB(255, 76, 175, 80)

// Base2, Base3, SubAlter y todas las pantallas (Verde unificado)
base2BackgroundColor: Color(0xFF4CAF50)
base2BorderColor: Color(0xFF2E7D32)
base3BackgroundColor: Color(0xFF4CAF50)
base3BorderColor: Color(0xFF2E7D32)
subAlterBackgroundColor: Color(0xFF4CAF50)
subAlterBorderColor: Color(0xFF2E7D32)
```

### Tema Oscuro
```dart
// C√≠rculos interactivos
circleColor: Color.fromRGBO(80, 80, 80, 0.9)
circleBorderColor: Color(0xFFBB86FC)
circleIconColor: Color(0xFF03DAC6)

// PageIndicator
pageIndicatorDotColor: Color.fromARGB(255, 100, 100, 100)
pageIndicatorActiveDotColor: Color(0xFFBB86FC)

// Base2, Base3, SubAlter y todas las pantallas (Esquema oscuro unificado)
base2BackgroundColor: Color.fromARGB(255, 72, 77, 73)
base2BorderColor: Color.fromARGB(255, 140, 89, 203)
base3BackgroundColor: Color.fromARGB(255, 72, 77, 73)
base3BorderColor: Color.fromARGB(255, 140, 89, 203)
subAlterBackgroundColor: Color.fromARGB(255, 72, 77, 73)
subAlterBorderColor: Color.fromARGB(255, 140, 89, 203)
```

## üé® Capturas de Pantalla

<div align="center">

### Modo claro
  | | | | |
  |:---:|:---:|:---:|:---:|
  | <img src="practica_2/assets/images/capturas_ejecucion/modo_claro/IMG-20251006-WA0019.jpg" alt="Captura 1" width="200"> | <img src="practica_2/assets/images/capturas_ejecucion/modo_claro/IMG-20251006-WA0020.jpg" alt="Captura 2" width="200"> | <img src="practica_2/assets/images/capturas_ejecucion/modo_claro/IMG-20251006-WA0023.jpg" alt="Captura 3" width="200"> | <img src="practica_2/assets/images/capturas_ejecucion/modo_claro/IMG-20251006-WA0024.jpg" alt="Captura 4" width="200"> |
  | <img src="practica_2/assets/images/capturas_ejecucion/modo_claro/IMG-20251006-WA0025.jpg" alt="Captura 5" width="200"> | <img src="practica_2/assets/images/capturas_ejecucion/modo_claro/IMG-20251006-WA0026.jpg" alt="Captura 6" width="200"> | <img src="practica_2/assets/images/capturas_ejecucion/modo_claro/IMG-20251006-WA0027.jpg" alt="Captura 7" width="200"> | <img src="practica_2/assets/images/capturas_ejecucion/modo_claro/IMG-20251006-WA0028.jpg" alt="Captura 8" width="200"> |
  | <img src="practica_2/assets/images/capturas_ejecucion/modo_claro/IMG-20251006-WA0029.jpg" alt="Captura 9" width="200"> | <img src="practica_2/assets/images/capturas_ejecucion/modo_claro/IMG-20251006-WA0030.jpg" alt="Captura 10" width="200"> | <img src="practica_2/assets/images/capturas_ejecucion/modo_claro/IMG-20251006-WA0031.jpg" alt="Captura 11" width="200"> | <img src="practica_2/assets/images/capturas_ejecucion/modo_claro/IMG-20251006-WA0032.jpg" alt="Captura 12" width="200"> |
  | <img src="practica_2/assets/images/capturas_ejecucion/modo_claro/IMG-20251006-WA0033.jpg" alt="Captura 13" width="200"> | <img src="practica_2/assets/images/capturas_ejecucion/modo_claro/IMG-20251006-WA0034.jpg" alt="Captura 14" width="200"> | <img src="practica_2/assets/images/capturas_ejecucion/modo_claro/IMG-20251006-WA0035.jpg" alt="Captura 15" width="200"> | <img src="practica_2/assets/images/capturas_ejecucion/modo_claro/IMG-20251006-WA0036.jpg" alt="Captura 16" width="200"> |

---

### Modo oscuro
  | | | | |
  |:---:|:---:|:---:|:---:|
  | <img src="practica_2/assets/images/capturas_ejecucion/modo_oscuro/IMG-20251006-WA0008.jpg" alt="Captura 1" width="200"> | <img src="practica_2/assets/images/capturas_ejecucion/modo_oscuro/IMG-20251006-WA0011.jpg" alt="Captura 2" width="200"> | <img src="practica_2/assets/images/capturas_ejecucion/modo_oscuro/IMG-20251006-WA0012.jpg" alt="Captura 3" width="200"> | <img src="practica_2/assets/images/capturas_ejecucion/modo_oscuro/IMG-20251006-WA0013.jpg" alt="Captura 4" width="200"> |
  | <img src="practica_2/assets/images/capturas_ejecucion/modo_oscuro/IMG-20251006-WA0014.jpg" alt="Captura 5" width="200"> | <img src="practica_2/assets/images/capturas_ejecucion/modo_oscuro/IMG-20251006-WA0015.jpg" alt="Captura 6" width="200"> | <img src="practica_2/assets/images/capturas_ejecucion/modo_oscuro/IMG-20251006-WA0016.jpg" alt="Captura 7" width="200"> | <img src="practica_2/assets/images/capturas_ejecucion/modo_oscuro/IMG-20251006-WA0017.jpg" alt="Captura 8" width="200"> |
  | <img src="practica_2/assets/images/capturas_ejecucion/modo_oscuro/IMG-20251006-WA0018.jpg" alt="Captura 9" width="200"> | <img src="practica_2/assets/images/capturas_ejecucion/modo_oscuro/IMG-20251006-WA0021.jpg" alt="Captura 10" width="200"> | <img src="practica_2/assets/images/capturas_ejecucion/modo_oscuro/IMG-20251006-WA0022.jpg" alt="Captura 11" width="200"> | <img src="practica_2/assets/images/capturas_ejecucion/modo_oscuro/IMG-20251006-WA0037.jpg" alt="Captura 12" width="200"> |
  | <img src="practica_2/assets/images/capturas_ejecucion/modo_oscuro/IMG-20251006-WA0038.jpg" alt="Captura 13" width="200"> | <img src="practica_2/assets/images/capturas_ejecucion/modo_oscuro/IMG-20251006-WA0039.jpg" alt="Captura 14" width="200"> | <img src="practica_2/assets/images/capturas_ejecucion/modo_oscuro/IMG-20251006-WA0040.jpg" alt="Captura 15" width="200"> | <img src="practica_2/assets/images/capturas_ejecucion/modo_oscuro/IMG-20251006-WA0041.jpg" alt="Captura 16" width="200"> |

--- 
</div>

## üé¨ Demostraci√≥n en Video

<div align="center">
    <img src="practica_2/assets/images/capturas_ejecucion/video_demostracion.gif" alt="Video Demostraci√≥n" width="300">
    <br>
    <em>Flujo completo de la aplicaci√≥n mostrando su comportamiento</em>
</div>

## Retos y Soluciones

### üöß Reto 1: Gesti√≥n de Assets e Im√°genes
**Problema**: Las im√°genes inicialmente estaban en una carpeta externa al proyecto Flutter.
**Soluci√≥n**: 
- Creamos la estructura `assets/images/` dentro del proyecto
- Copiamos todas las im√°genes al directorio correcto
- Configuramos `pubspec.yaml` para incluir los assets
- Utilizamos rutas relativas en `AssetImage()`

### üöß Reto 2: Fondo Transparente en Indicadores
**Problema**: El contenedor de los indicadores de p√°gina mostraba fondo blanco por defecto.
**Soluci√≥n**:
- Aplicamos `color: Colors.transparent` expl√≠citamente
- Creamos widget separado para mejor control del styling
- Implementamos `smooth_page_indicator` para efectos profesionales

### üöß Reto 3: Posicionamiento Preciso de Elementos Interactivos
**Problema**: Necesit√°bamos posicionar c√≠rculos interactivos en coordenadas espec√≠ficas.
**Soluci√≥n**:
- Implementamos `Positioned` widget con coordenadas exactas
- Creamos `InteractiveCircleWidget` con par√°metros de posici√≥n
- Utilizamos `MediaQuery` para c√°lculos responsive
- A√±adimos `Stack` layout para superposici√≥n de elementos

### üöß Reto 4: Navegaci√≥n H√≠brida (Gestos + Toque)
**Problema**: Combinar navegaci√≥n por deslizamiento con navegaci√≥n por toque.
**Soluci√≥n**:
- `PageView` para navegaci√≥n principal horizontal
- `Navigator.push` para navegaci√≥n vertical/profunda
- Mantenimiento de contexto y estado entre pantallas
- Botones de retorno consistentes

### üöß Reto 5: Arquitectura Modular y Mantenible
**Problema**: C√≥digo inicialmente centralizado en `main.dart` dificultaba el mantenimiento.
**Soluci√≥n**:
- Refactorizaci√≥n a arquitectura por capas (`screens/`, `widgets/`)
- Separaci√≥n de responsabilidades por funcionalidad
- Widgets reutilizables y configurables
- Imports organizados y documentaci√≥n clara

## Estructura del Proyecto

```
lib/
‚îú‚îÄ‚îÄ main.dart                     # Aplicaci√≥n principal y navegaci√≥n PageView
‚îú‚îÄ‚îÄ screens/
‚îÇ   ‚îú‚îÄ‚îÄ MainScreen.dart          # Pantalla inicial con imagen de bienvenida
‚îÇ   ‚îú‚îÄ‚îÄ AlterScreen.dart         # Segunda pantalla con c√≠rculo interactivo
‚îÇ   ‚îî‚îÄ‚îÄ SubAlterScreen.dart      # Pantalla de detalle con zoom
‚îî‚îÄ‚îÄ widgets/
    ‚îú‚îÄ‚îÄ PageIndicatorWidget.dart      # Indicador de p√°ginas con SlideEffect
    ‚îî‚îÄ‚îÄ InteractiveCircleWidget.dart  # C√≠rculo interactivo posicionable

assets/images/
‚îú‚îÄ‚îÄ bienvenida.png               # Imagen de t√≠tulo principal
‚îú‚îÄ‚îÄ planta_base_1.jpg           # Fondo de pantalla principal
‚îú‚îÄ‚îÄ planta_base_2.jpg           # Fondo de segunda pantalla
‚îî‚îÄ‚îÄ base_2_zoom.jpg             # Imagen de detalle con zoom
```

## Instrucciones de Instalaci√≥n y Ejecuci√≥n

### Prerrequisitos
- Flutter SDK (versi√≥n 3.9.0 o superior)
- Dart SDK
- Android Studio / VS Code
- Emulador Android o dispositivo f√≠sico
- Git